<section class="section bg-ai">
    <div class="container">
        <div class="flex flex-col">
            <div class="flex flex-col max-w-[628px] mx-auto">
                <div class="flex ">
                    <i class="AI-icon min-w-10 mr-1"></i>
                    <h1 class="text-Text font-medium tracking-12 text-h3 lg:text-h2Mob text-center"><span class="text-blue100">AI</span>-Powered Lawyer Matching:
                        Fast, Accurate, and Free</h1>
                </div>
                <span class="flex items-center gap-x-2 mx-auto my-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="47" height="3" viewBox="0 0 47 3" fill="none">
                          <path d="M2 1.5H45" stroke="#FFBF16" stroke-width="3" stroke-linecap="round"/>
                        </svg>
                        <svg xmlns="http://www.w3.org/2000/svg" width="47" height="3" viewBox="0 0 47 3" fill="none">
                          <path d="M2 1.5H45" stroke="#FFBF16" stroke-width="3" stroke-linecap="round" stroke-dasharray="7 7"/>
                        </svg>
                    </span>
                <p class="text-center">Our AI-powered lawyer finder makes it easy to connect with the right attorney for your situation. Simply answer a few questions about your case.</p>
            </div>
            <div x-data="multiStepForm" class="w-full max-w-[720px] mx-auto bg-white p-6 mt-6 md:px-4 md:py-5 rounded-xl shadow-v1">
                <!-- Step 1 -->
                <div x-show="step === 1">
                    <div class="flex flex-col">
                        <div class="flex mb-6">
                            <i class="AI-icon-small min-w-[37px] mr-3 mt-1"></i>
                            <div class="flex flex-col">
                                <p class="text-base font-medium mb-2">Describe your problem.</p>
                                <p class="text-Grey">Briefly explain the legal situation you're facing!</p>
                            </div>
                        </div>
                        <label>
                            <textarea x-model="textInput" class="input steps mb-5" placeholder="Tell us what happened..."></textarea>
                        </label>
                        <p class="text-body2 text-Grey mb-5"><span class="font-bold">For example:</span> Delaware was the first state to officially ratify the United States Constitution in 1787. For this reason, Delaware considers itself "the first state." </p>
                        <button @click="handleSubmitStep1" class="button" aria-label="Get Started Button">
                            <span>Get Started</span>
                            <svg class="ml-2" xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10" fill="none">
                                <path d="M4.88452 0.880859L9.19988 5.00007L4.88452 9.11928" stroke="white" stroke-width="1.28571" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Step 2 -->
                <div x-show="step === 2">
                    <div class="flex flex-col">
                        <div class="flex mb-6">
                            <i class="AI-icon-small min-w-[37px] mr-3 mt-1"></i>
                            <div class="flex flex-col">
                                <p class="text-base font-medium mb-2">Tell us how to reach you.</p>
                                <p class="text-Grey">Provide your contact details so we can connect you with the best lawyers.</p>
                            </div>
                        </div>
                        <div class="row gap-4 md:gap-x-0">
                            <div class="col-span-6 md:col-span-12">
                                <div class="form-group flex flex-col items-start">
                                    <label class="w-full">
                                        <input x-model="formData.name" class="input input-icon User-input" type="text" id="nameStepId" placeholder="Full Name" name="name" required>
                                    </label>
                                    <small x-show="errors.name" class="self-end text-body2 text-Error mt-1" x-text="errors.name"></small>
                                </div>
                            </div>
                            <div class="col-span-6 md:col-span-12">
                                <div class="form-group flex flex-col items-start">
                                    <label class="w-full">
                                        <input x-model="formData.phone" class="input input-icon Phone-input" type="tel" id="phoneStepId" placeholder="Phone" name="phone" required>
                                    </label>
                                    <small x-show="errors.phone" class="self-end text-body2 text-Error mt-1" x-text="errors.phone"></small>
                                </div>
                            </div>
                            <div class="col-span-6 md:col-span-12">
                                <div class="form-group flex flex-col items-start">
                                    <label class="w-full">
                                        <input x-model="formData.email" class="input input-icon Mail-input" type="email" id="emailStepId" placeholder="Email" name="email" required>
                                    </label>
                                    <small x-show="errors.email" class="self-end text-body2 text-Error mt-1" x-text="errors.email"></small>
                                </div>
                            </div>
                            <div class="col-span-6 md:col-span-12">
                                <div class="form-group flex flex-col items-start">
                                    <label class="w-full">
                                        <input x-model="formData.zip" class="input input-icon website-input" type="text" id="zipStepId" placeholder="ZIP Code" name="zip" required>
                                    </label>
                                    <small x-show="errors.zip" class="self-end text-body2 text-Error mt-1" x-text="errors.zip"></small>
                                </div>
                            </div>
                            <div class="col-span-12">
                                <div class="flex flex-col mt-2">
                                    <label class="custom-checkbox">
                                    <span class="custom-checkbox__block w-[18px] min-w-[18px] h-[18px]">
                                        <i class="w-[18px] min-w-[18px] h-[18px] rounded bg-white border border-blue100 flex"></i>
                                    </span>
                                        <input x-model="formData.terms" type="checkbox" name="terms">
                                        <span class="checkmark">
                                         <i class="Checkbox"></i>
                                    </span>
                                        <span class="ml-2 text-body2 text-Grey">I consent to be contacted and i have read and agree to the <a class="text-blue100" href="#">LawyerAI privacy notice</a> and <a class="text-blue100" href="#">terms of service.*</a></span>
                                    </label>
                                    <small x-show="errors.terms" class="self-start text-body2 text-Error mt-1" x-text="errors.terms"></small>
                                </div>
                            </div>
                            <div class="col-span-12">
                                <button @click="handleSubmitStep2" class="button mt-2" aria-label="Let’s talk Button">
                                    <span>Let’s talk</span>
                                    <svg class="ml-2" xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10" fill="none">
                                        <path d="M4.88452 0.880859L9.19988 5.00007L4.88452 9.11928" stroke="white" stroke-width="1.28571" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 3 (Loading) -->
                <div x-show="step === 3" class="">
                    <div class="flex flex-col">
                        <div class="flex mb-6">
                            <i class="AI-icon-small min-w-[37px] mr-3 mt-1"></i>
                            <div class="flex flex-col">
                                <p class="text-base font-medium mb-2 text-left">Describe a legal project or role and we’ll match you with exceptional legal talent.</p>
                            </div>
                        </div>
                        <svg class="w-12 h-12 animate-spin mx-auto mb-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" fill="none">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M24 2.5C24.8284 2.5 25.5 3.17157 25.5 4V8C25.5 8.82843 24.8284 9.5 24 9.5C23.1716 9.5 22.5 8.82843 22.5 8V4C22.5 3.17157 23.1716 2.5 24 2.5Z" fill="#004ED5"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M34.7498 5.38042C35.4672 5.79463 35.713 6.71202 35.2988 7.42946L33.2988 10.8935C32.8846 11.611 31.9672 11.8568 31.2498 11.4425C30.5323 11.0283 30.2865 10.1109 30.7007 9.3935L32.7007 5.92944C33.1149 5.21201 34.0323 4.9662 34.7498 5.38042Z" fill="#004ED5"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M42.6198 13.25C43.034 13.9674 42.7882 14.8848 42.0708 15.299L38.6067 17.299C37.8893 17.7133 36.9719 17.4674 36.5577 16.75C36.1434 16.0326 36.3893 15.1152 37.1067 14.701L40.5708 12.701C41.2882 12.2868 42.2056 12.5326 42.6198 13.25Z" fill="#004ED5"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M38.5 24C38.5 23.1716 39.1716 22.5 40 22.5H44C44.8284 22.5 45.5 23.1716 45.5 24C45.5 24.8284 44.8284 25.5 44 25.5H40C39.1716 25.5 38.5 24.8284 38.5 24Z" fill="#004ED5"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M36.5577 31.25C36.9719 30.5326 37.8893 30.2868 38.6067 30.701L42.0708 32.701C42.7882 33.1152 43.034 34.0326 42.6198 34.75C42.2056 35.4674 41.2882 35.7133 40.5708 35.299L37.1067 33.299C36.3893 32.8848 36.1434 31.9674 36.5577 31.25Z" fill="#004ED5"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M31.2498 36.5574C31.9672 36.1432 32.8846 36.389 33.2988 37.1065L35.2988 40.5706C35.713 41.288 35.4672 42.2054 34.7498 42.6196C34.0323 43.0338 33.1149 42.788 32.7007 42.0706L30.7007 38.6065C30.2865 37.889 30.5323 36.9716 31.2498 36.5574Z" fill="#D1D1D1"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M24 38.5C24.8284 38.5 25.5 39.1716 25.5 40V44C25.5 44.8284 24.8284 45.5 24 45.5C23.1716 45.5 22.5 44.8284 22.5 44V40C22.5 39.1716 23.1716 38.5 24 38.5Z" fill="#D1D1D1"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M16.7498 36.5574C17.4672 36.9716 17.713 37.889 17.2988 38.6065L15.2988 42.0706C14.8846 42.788 13.9672 43.0338 13.2498 42.6196C12.5323 42.2054 12.2865 41.288 12.7007 40.5706L14.7007 37.1065C15.1149 36.389 16.0323 36.1432 16.7498 36.5574Z" fill="#D1D1D1"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M11.4425 31.25C11.8568 31.9674 11.611 32.8848 10.8935 33.299L7.42946 35.299C6.71202 35.7133 5.79463 35.4674 5.38042 34.75C4.9662 34.0326 5.21201 33.1152 5.92944 32.701L9.3935 30.701C10.1109 30.2868 11.0283 30.5326 11.4425 31.25Z" fill="#004ED5"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 24C2.5 23.1716 3.17157 22.5 4 22.5H8C8.82843 22.5 9.5 23.1716 9.5 24C9.5 24.8284 8.82843 25.5 8 25.5H4C3.17157 25.5 2.5 24.8284 2.5 24Z" fill="#004ED5"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M5.38042 13.25C5.79463 12.5326 6.71202 12.2868 7.42946 12.701L10.8935 14.701C11.611 15.1152 11.8568 16.0326 11.4425 16.75C11.0283 17.4675 10.1109 17.7133 9.3935 17.299L5.92944 15.299C5.21201 14.8848 4.9662 13.9674 5.38042 13.25Z" fill="#004ED5"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M13.2498 5.38042C13.9672 4.9662 14.8846 5.21201 15.2988 5.92944L17.2988 9.3935C17.713 10.1109 17.4672 11.0283 16.7498 11.4425C16.0323 11.8568 15.1149 11.611 14.7007 10.8935L12.7007 7.42946C12.2865 6.71202 12.5323 5.79463 13.2498 5.38042Z" fill="#004ED5"/>
                        </svg>
                        <p class="mt-3 text-center text-body2 text-Grey">Searching Axiom’s bench of legal professionals.</p>
                    </div>
                </div>

                <!-- Step 4 -->
                <div x-show="step === 4 && !error" class="">
                    <div class="flex flex-col">
                        <div class="flex items-center mb-6">
                            <i class="AI-icon-small min-w-[37px] mr-3"></i>
                            <div class="flex flex-col">
                                <p class="text-base font-medium">Are you agree to make your question public?</p>
                            </div>
                        </div>
                        <div class="flex flex-col mb-4 bg-pageBg p-3 border border-LightGrey rounded-lg overflow-hidden">
                            <span class="block mb-2 text-blue100 text-body2 font-medium">Answer:</span>
                            <p class="text-body2">Sed ultricies sapien at ante dapibus, et euismod ex sodales. Curabitur ac luctus mauris. Ut vel sem sit amet leo molestie fringilla. Nunc nec rhoncus ipsum.Aliquam sollicitudin in eros a venenatis. Etiam at porttitor lectus. Donec ut ligula purus. Donec porttitor tellus at scelerisque volutpat. Maecenas a arcu nec sem pellentesque tristique vel eu dui. </p>
                        </div>
                        <div class="flex px-4 py-3 bg-LightGrey rounded-lg overflow-hidden gap-x-2">
                            <svg class="min-w-[18px]" xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                                <path d="M9 0.54541C4.0374 0.54541 0 4.58281 0 9.54541C0 14.508 4.0374 18.5454 9 18.5454C13.9626 18.5454 18 14.508 18 9.54541C18 4.58281 13.9626 0.54541 9 0.54541ZM7.2009 13.5171L3.8592 10.1826L5.13 8.90821L7.1991 10.9737L11.9637 6.20911L13.2363 7.48171L7.2009 13.5171Z" fill="#004ED5"/>
                            </svg>
                            <p class="text-body2 font-medium">If you agree, your question and the Al's answer will be added to our knowledge base to help others facing similar legal issues.If you agree, your question and the Al's answer will be added to our knowledge base to help others facing similar legal issues.If you agree, your question and the Al's answer will be added to our knowledge base to help others facing similar legal issues.</p>
                        </div>
                        <div class="mt-6 mb-8 flex gap-x-3">
                            <a class="button min-w-0" href="#">
                                <span class="">Yes</span>
                            </a>
                            <a class="button disabled min-w-0" href="#">
                                <span class="">No</span>
                            </a>
                        </div>
                        <div class="flex items-center mb-6">
                            <i class="AI-icon-small min-w-[37px] mr-3"></i>
                            <div class="flex flex-col">
                                <p class="text-base font-medium">Or connect with your local attorney</p>
                            </div>
                        </div>
                        <div class="flex px-4 py-3 bg-LightGrey rounded-lg overflow-hidden gap-x-2">
                            <svg class="min-w-[18px]" xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                                <path d="M9 0.54541C4.0374 0.54541 0 4.58281 0 9.54541C0 14.508 4.0374 18.5454 9 18.5454C13.9626 18.5454 18 14.508 18 9.54541C18 4.58281 13.9626 0.54541 9 0.54541ZM7.2009 13.5171L3.8592 10.1826L5.13 8.90821L7.1991 10.9737L11.9637 6.20911L13.2363 7.48171L7.2009 13.5171Z" fill="#004ED5"/>
                            </svg>
                            <p class="text-body2 font-medium">Lorem ipsum dolor sit amet concectetur sit amen.Lorem ipsum dolor sit amet concectetur sit amen.</p>
                        </div>
                    </div>
                </div>

                <!-- Error Block -->
                <div x-show="error" class="">
                    <div class="px-3 py-2 my-4 bg-Error2 flex items-center border border-Error3 rounded-lg w-full">
                        <svg class="mr-2" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M18 9C18 11.3869 17.0518 13.6761 15.364 15.364C13.6761 17.0518 11.3869 18 9 18C6.61305 18 4.32387 17.0518 2.63604 15.364C0.948212 13.6761 0 11.3869 0 9C0 6.61305 0.948212 4.32387 2.63604 2.63604C4.32387 0.948212 6.61305 0 9 0C11.3869 0 13.6761 0.948212 15.364 2.63604C17.0518 4.32387 18 6.61305 18 9ZM9 3.375C9.22378 3.375 9.43839 3.46389 9.59662 3.62213C9.75486 3.78036 9.84375 3.99497 9.84375 4.21875V9.28125C9.84375 9.50503 9.75486 9.71964 9.59662 9.87787C9.43839 10.0361 9.22378 10.125 9 10.125C8.77622 10.125 8.56161 10.0361 8.40338 9.87787C8.24514 9.71964 8.15625 9.50503 8.15625 9.28125V4.21875C8.15625 3.99497 8.24514 3.78036 8.40338 3.62213C8.56161 3.46389 8.77622 3.375 9 3.375ZM9 14.625C9.29837 14.625 9.58452 14.5065 9.7955 14.2955C10.0065 14.0845 10.125 13.7984 10.125 13.5C10.125 13.2016 10.0065 12.9155 9.7955 12.7045C9.58452 12.4935 9.29837 12.375 9 12.375C8.70163 12.375 8.41548 12.4935 8.2045 12.7045C7.99353 12.9155 7.875 13.2016 7.875 13.5C7.875 13.7984 7.99353 14.0845 8.2045 14.2955C8.41548 14.5065 8.70163 14.625 9 14.625Z" fill="#DD0000"/>
                        </svg>
                        <p class="text-body2">Error</p>
                    </div>
                </div>

                <!-- Thank You -->
                <div x-show="step === 5" class="text-center">
                    <p class="text-lg font-semibold ">Спасибо за участие!</p>
                </div>
            </div>
        </div>
    </div>
</section>
<script>
    document.addEventListener('alpine:init', () => {
        Alpine.data('multiStepForm', () => ({
            step: 1,
            textInput: '',
            formData: {
                text: '',
                name: '',
                phone: '',
                email: '',
                zip: '',
                terms: false
            },
            errors: {
                name: '',
                phone: '',
                email: '',
                zip: '',
                terms: ''
            },
            loading: false,
            error: false,
            handleSubmitStep1() {
                this.formData.text = this.textInput;
                localStorage.setItem('step1', JSON.stringify({ text: this.textInput }));
                this.step = 2;
            },
            validateStep2() {
                this.errors = { name: '', phone: '', email: '', zip: '', terms: '' };
                let valid = true;

                if (!this.formData.name.trim()) {
                    this.errors.name = 'Name is required.';
                    valid = false;
                }
                if (!this.formData.phone.trim()) {
                    this.errors.phone = 'Phone is required.';
                    valid = false;
                }
                if (!this.formData.email.trim()) {
                    this.errors.email = 'Email is required.';
                    valid = false;
                } else if (!/\S+@\S+\.\S+/.test(this.formData.email)) {
                    this.errors.email = 'Invalid email format.';
                    valid = false;
                }
                if (!this.formData.zip.trim()) {
                    this.errors.zip = 'ZIP Code is required.';
                    valid = false;
                }
                if (!this.formData.terms) {
                    this.errors.terms = 'You must accept the terms.';
                    valid = false;
                }

                return valid;
            },
            handleSubmitStep2() {
                if (!this.validateStep2()) {
                    return;
                }

                this.loading = true;
                this.error = false;
                this.step = 3;

                setTimeout(() => {
                    axios.post('/api/submit', this.formData)
                        .then(() => {
                            this.step = 4;
                        })
                        .catch(error => {
                            console.error('Ошибка:', error);
                            this.error = true;
                            this.step = 2;
                        })
                        .finally(() => {
                            this.loading = false;
                        });
                }, 1000);
            },
            handleRetry() {
                this.error = false;
                this.step = 2;
            }
        }));
    });
</script>